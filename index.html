<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Balance Calculator with AI</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Raleway', sans-serif;
        }
        
        body {
            color: #fff;
            background: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=2000&q=80') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .overlay {
            background: rgba(0, 0, 0, 0.45);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .container {
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            width: 100%;
        }
        
        h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 0 0 15px #00bfff;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 40px;
            width: 100%;
        }
        
        .water-info {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .water-info h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
            color: #00bfff;
            text-shadow: 0 0 10px rgba(0, 191, 255, 0.5);
        }
        
        .water-info p {
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 1.05em;
        }
        
        .form-section {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 1.1em;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.85);
            font-size: 1em;
            color: #333;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            box-shadow: 0 0 0 2px #00bfff;
            background: white;
        }
        
        .dropdown {
            position: relative;
            margin-bottom: 20px;
        }
        
        .dropdown-header {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
            font-weight: 500;
        }
        
        .dropdown-header:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .dropdown-content {
            display: none;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0 0 8px 8px;
            margin-top: 5px;
        }
        
        .dropdown.active .dropdown-content {
            display: block;
        }
        
        .dropdown-icon {
            transition: transform 0.3s;
        }
        
        .dropdown.active .dropdown-icon {
            transform: rotate(180deg);
        }
        
        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: #00bfff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .calculate-btn:hover {
            background: #0099cc;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .result {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: center;
            display: none;
            backdrop-filter: blur(5px);
        }
        
        .result h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
            color: #00bfff;
        }
        
        .result-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #00bfff;
            text-shadow: 0 0 10px rgba(0, 191, 255, 0.5);
            margin: 10px 0;
        }
        
        .water-drop {
            font-size: 2.5rem;
            margin: 10px 0;
        }
        
        .ai-recommendation {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 191, 255, 0.1);
            border-radius: 8px;
            text-align: left;
            display: none;
        }
        
        .ai-recommendation h4 {
            color: #00bfff;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .ai-recommendation p {
            line-height: 1.6;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #00bfff;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        footer {
            margin-top: 40px;
            text-align: center;
            opacity: 0.7;
            font-size: 0.9rem;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5em;
            }
            
            .content {
                flex-direction: column;
            }
            
            .water-info, .form-section {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    
    <div class="container">
        <header>
            <h1>ðŸ’§ Water Balance ðŸ’§</h1>
            <p class="subtitle">Calculate your individual water needs based on your data and activity level</p>
        </header>
        
        <div class="content">
            <div class="water-info">
                <h2>About Water and Hydration</h2>
                <p>Water is the source of life. It makes up about 60% of our body and plays a key role in the functioning of all organs and systems.</p>
                <p>Maintaining water balance is important for:</p>
                <ul style="margin-left: 20px; margin-bottom: 15px;">
                    <li>Regulating body temperature</li>
                    <li>Nourishing cells and tissues</li>
                    <li>Removing toxins</li>
                    <li>Maintaining skin health</li>
                    <li>Increasing energy and concentration</li>
                </ul>
                <p>Our calculation formula takes into account your weight, physical activity and weather conditions to determine the optimal amount of water.</p>
                <p style="margin-top: 20px; color: #00bfff; font-weight: 500;">Now with AI-powered personalized recommendations!</p>
            </div>
            
            <div class="form-section">
                <div class="form-group">
                    <label for="name">Your Name</label>
                    <input type="text" id="name" placeholder="Enter your name">
                </div>
                
                <div class="form-group">
                    <label for="weight">Your Weight (kg)</label>
                    <input type="number" id="weight" placeholder="Enter your weight">
                </div>
                
                <div class="dropdown" id="sport-dropdown">
                    <div class="dropdown-header">
                        <span>What sport do you practice?</span>
                        <span class="dropdown-icon">â–¼</span>
                    </div>
                    <div class="dropdown-content">
                        <select id="sport">
                            <option value="0">No sports</option>
                            <option value="200">Light workouts (200 kcal)</option>
                            <option value="400">Medium workouts (400 kcal)</option>
                            <option value="600">Intense workouts (600 kcal)</option>
                            <option value="800">Professional sports (800 kcal)</option>
                        </select>
                    </div>
                </div>
                
                <div class="dropdown" id="weather-dropdown">
                    <div class="dropdown-header">
                        <span>What is your weather like?</span>
                        <span class="dropdown-icon">â–¼</span>
                    </div>
                    <div class="dropdown-content">
                        <select id="weather">
                            <option value="0.3">Cold (0.3)</option>
                            <option value="0.35">Cool (0.35)</option>
                            <option value="0.4">Moderate (0.4)</option>
                            <option value="0.45">Warm (0.45)</option>
                            <option value="0.5">Hot (0.5)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="api-key">Your OpenAI API Key</label>
                    <input type="password" id="api-key" placeholder="Enter your OpenAI API key">
                    <small style="color: rgba(255,255,255,0.7); font-size: 0.8em;">Your API key is used only for this session and is not stored</small>
                </div>
                
                <button class="calculate-btn" id="calculate">Calculate Water Balance</button>
                
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                    <p>Getting AI recommendations...</p>
                </div>
                
                <div class="result" id="result">
                    <h3>Your Recommended Water Intake:</h3>
                    <div class="water-drop">ðŸ’§</div>
                    <div class="result-value" id="result-value">0</div>
                    <p>liters per day</p>
                    
                    <div class="ai-recommendation" id="ai-recommendation">
                        <h4>AI Hydration Tips:</h4>
                        <p id="ai-text">Loading recommendations...</p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Â© 2025 Water Balance. Drink enough water for health and well-being!</p>
        </footer>
    </div>

    <script>
        // Dropdown functionality
        document.querySelectorAll('.dropdown-header').forEach(header => {
            header.addEventListener('click', function() {
                this.parentElement.classList.toggle('active');
            });
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.dropdown')) {
                document.querySelectorAll('.dropdown').forEach(dropdown => {
                    dropdown.classList.remove('active');
                });
            }
        });

        // Water balance calculation and AI recommendations
        document.getElementById('calculate').addEventListener('click', async function() {
            const name = document.getElementById('name').value.trim();
            const weight = parseFloat(document.getElementById('weight').value);
            const sportCalories = parseFloat(document.getElementById('sport').value);
            const weatherFactor = parseFloat(document.getElementById('weather').value);
            const apiKey = document.getElementById('api-key').value.trim();
            
            if (!weight || weight <= 0) {
                alert('Please enter a valid weight');
                return;
            }
            
            if (!apiKey) {
                alert('Please enter your OpenAI API key');
                return;
            }
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            
            // Calculation formula: weight * 0.03 + calories * 0.001 + weather factor
            const result = (weight * 0.03) + (sportCalories * 0.001) + weatherFactor;
            
            // Display result
            document.getElementById('result-value').textContent = result.toFixed(2);
            
            // Get AI recommendations
            try {
                const aiText = await getAIRecommendations(name, weight, sportCalories, weatherFactor, result, apiKey);
                document.getElementById('ai-text').textContent = aiText;
                document.getElementById('ai-recommendation').style.display = 'block';
            } catch (error) {
                console.error('Error getting AI recommendations:', error);
                document.getElementById('ai-text').textContent = "Unable to load AI recommendations. Please check your API key and try again.";
                document.getElementById('ai-recommendation').style.display = 'block';
            }
            
            // Hide loading
            document.getElementById('loading').style.display = 'none';
            
            // Animate result appearance
            const resultElement = document.getElementById('result');
            resultElement.style.opacity = '0';
            resultElement.style.transform = 'translateY(20px)';
            resultElement.style.display = 'block';
            
            setTimeout(() => {
                resultElement.style.transition = 'all 0.5s ease';
                resultElement.style.opacity = '1';
                resultElement.style.transform = 'translateY(0)';
            }, 10);
            
            // Smooth scroll to result
            resultElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });

        // Function to get AI recommendations
        async function getAIRecommendations(name, weight, sportCalories, weatherFactor, waterAmount, apiKey) {
            // Determine activity level based on sport calories
            let activityLevel = "sedentary";
            if (sportCalories >= 600) activityLevel = "very active";
            else if (sportCalories >= 400) activityLevel = "active";
            else if (sportCalories >= 200) activityLevel = "lightly active";
            
            // Determine weather condition
            let weatherCondition = "moderate";
            if (weatherFactor >= 0.5) weatherCondition = "hot";
            else if (weatherFactor >= 0.45) weatherCondition = "warm";
            else if (weatherFactor >= 0.4) weatherCondition = "moderate";
            else if (weatherFactor >= 0.35) weatherCondition = "cool";
            else weatherCondition = "cold";
            
            const prompt = `As a hydration expert, provide personalized water intake recommendations for ${name || "a person"} who weighs ${weight} kg, has ${activityLevel} activity level, and lives in ${weatherCondition} weather conditions. 
            
            The calculated water intake is ${waterAmount.toFixed(2)} liters per day. 
            
            Please provide:
            1. A brief explanation of why this amount is recommended
            2. Practical tips for achieving this daily water intake
            3. Signs of proper hydration to watch for
            4. Any additional considerations based on the provided data
            
            Keep the response concise, practical, and encouraging. Use a friendly, professional tone.`;
            
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: 'gpt-3.5-turbo',
                    messages: [
                        {
                            role: 'system',
                            content: 'You are a helpful hydration and wellness expert. Provide practical, evidence-based advice about water intake and hydration, say it shortly and only correct information'
                        },
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    max_tokens: 500,
                    temperature: 0.7
                })
            });
            
            if (!response.ok) {
                throw new Error(`API request failed with status ${response.status}`);
            }
            
            const data = await response.json();
            return data.choices[0].message.content;
        }
    </script>
</body>
</html>
